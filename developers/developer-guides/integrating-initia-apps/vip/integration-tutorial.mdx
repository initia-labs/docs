---
title: Integration Tutorial
---

This guide shows how to enable VIP for an **EVM rollup** on the Initia testnet.  
For Wasm or Move rollups, follow the same steps; just use the appropriate scoring contract repository.

<Info title="Network Details">
You can find Initia L1 RPC endpoints and chain IDs in **[Network Information](/resources/developer/initia-l1.mdx)**.
</Info>

<Steps title="VIP Integration Steps">
  <Step title="Deploy Your EVM Rollup">
    Launch your rollup using the [Weave CLI](/developers/developer-guides/tools/clis/weave-cli/rollup/introduction.mdx).
  </Step>
  <Step title="Deploy the VIP Scoring Contract">
    To deploy the VIP scoring contract:
    
    Clone [`vip-score-evm`](https://github.com/initia-labs/vip-score-evm).
    ```bash
    git clone https://github.com/initia-labs/vip-score-evm.git
    ```
    
    Compile and deploy `VIPScore.sol` using Hardhat, Foundry, Viem, or another EVM framework.  
    ```bash
    npm run compile
    ```
    
    Save the deployed contract address; you will need it for the whitelist proposal.
  </Step>
  <Step title="Register the Rollup in the Initia Registry">
    Clone the Initia Registry repository.  
    
    ```bash
    git clone https://github.com/initia-labs/initia-registry.git
    ```

    Submit a pull request to merge these files into the mainnet or testnet directory, depending on your rollup's network.
      - `chain.json`: rollup metadata ([example](https://github.com/initia-labs/initia-registry/blob/main/mainnets/yominet/chain.json))
      - `profile.json`: VIP criteria and rollup information ([example](https://github.com/initia-labs/initia-registry/blob/main/profiles/yominet.json))  
  </Step>
  <Step title="Request VIP Whitelisting">
    Draft a forum post with the whitelist template, specifying your operator address and the scoring-contract address.  
    After community discussion, the request proceeds to an Initia L1 governance vote that runs for seven days; a successful “YES” activates VIP on your rollup.
  </Step>
  <Step title="Operate the VIP Scoring Contract">
    For each two-week VIP stage, use the following methods:

    | Action          | Method                             | Description                     |
    | --------------- | ---------------------------------- | ------------------------------- |
    | Start a stage   | `prepareStage(uint64 stage)`       | Opens a new stage               |
    | Update scores   | `updateScores(stage, addrs[], amounts[])` | Batch-write user scores  |
    | Finalize stage  | `finalizeStage(uint64 stage)`      | Locks scores (irreversible)     |

    ```ts
    import "dotenv/config";
    import { ethers } from "ethers";

    const VIPScoreABI = [
      "function prepareStage(uint64 stage)",
      "function updateScores(uint64 stage, address[] addrs, uint64[] amounts)",
      "function finalizeStage(uint64 stage)",
    ];

    /* -------------------------------------------------------- *
    *  Environment variables                                   *
    * -------------------------------------------------------- */
    const {
      JSON_RPC_URL     = "https://json-rpc.<your-rollup>.xyz",
      PRIVATE_KEY      = "0xabcd1234...",
      CONTRACT_ADDRESS = "0x12345...",
    } = process.env;

    if (!JSON_RPC_URL || !PRIVATE_KEY || !CONTRACT_ADDRESS) {
      throw new Error("JSON_RPC_URL, PRIVATE_KEY, or CONTRACT_ADDRESS is missing.");
    }

    /* -------------------------------------------------------- *
    *  Initialize ethers                                       *
    * -------------------------------------------------------- */
    const provider = new ethers.JsonRpcProvider(JSON_RPC_URL);
    const signer   = new ethers.Wallet(PRIVATE_KEY, provider);
    const vip      = new ethers.Contract(CONTRACT_ADDRESS, VIPScoreABI, signer);

    /* -------------------------------------------------------- *
    *  Stage operations                                        *
    * -------------------------------------------------------- */
    async function run() {
      const stage = 2;                                           // example epoch

      // 1. prepareStage
      console.log(`prepareStage(${stage})`);
      await (await vip.prepareStage(stage)).wait();

      // 2. updateScores (batch)
      const addrs   = [
        "0x1111111111111111111111111111111111111111",
        "0x2222222222222222222222222222222222222222",
      ];
      const amounts = [BigInt(100), BigInt(250)];
      console.log(`updateScores(${stage}, addrs[], amounts[])`);
      await (await vip.updateScores(stage, addrs, amounts)).wait();

      // 3. finalizeStage
      console.log(`finalizeStage(${stage})`);
      await (await vip.finalizeStage(stage)).wait();

      console.log("Stage finalized successfully.");
    }

    run().catch((err) => console.error(err));
    ```

    <Warning title="Finalization">
    `finalizeStage` is permanent. Verify all data before calling it.
    </Warning>
  </Step>
</Steps>