---
title: Integrating Initia VIP
---

This guide provides instructions for Interwoven rollups on how to integrate VIP into their apps, from registration to key considerations.

## Onboarding Phase

This phase is the **prerequisite** for joining the Vested Interest Program (VIP).

<Steps>
  <Step title="Add information to Initia Registry">
    Refer to [this page](/developers/developer-guides/integrating-initia-apps/registry/introduction.mdx) for more information.

    Add chain details to the Initia Registry:

    - **`chain.json`**: basic chain information
    - **`profile.json`**: VIP criteria, including the scoring policy
        - Please include the link to the forum post with the detailed scoring criteria

    <Note>
    The scoring policy is a critical component in distributing VIP rewards, as it shapes users’ experiences and behaviors on the appchain. 
    Therefore, rollup teams must consult the community through the Initia Forum before finalizing any policy. 
    Additionally, any changes made after a governance proposal must be introduced as a new forum proposal and publicly announced through official channels such as Twitter and Discord.
    </Note>
  </Step>
  <Step title="Deploy the VIP Scoring Contract">
    Deploy the appropriate VIP scoring contract for your rollup’s VM.
      - EVM:https://github.com/initia-labs/vip-score-evm
      - Wasm:https://github.com/initia-labs/vip-score-wasm
      - Move:https://github.com/initia-labs/vip-score-move

    <Tip>
    VIP scores are stored on-chain and cannot be altered. Thorough testing the scoring logic on the testnet is required.
    </Tip>
  </Step>
  <Step title="Post a VIP-Whitelisting proposal in the Initia Forum">
    Before your rollup can be whitelisted, you must open a proposal in the [Initia Forum](https://forum.initia.xyz). 
    In the post, specify the `operator address` that will receive VIP commissions and the address of your deployed `VIP-scoring contract`, using the official [template](https://forum.initia.xyz/t/whitelist-new-rollup-on-vip/146).
  </Step>
  <Step title="Wait for the L1 Governance vote">
    After discussion in the forum, submit a governance proposal on Initia L1.
    If the community votes **YES**, the rollup is whitelisted for VIP and moves to the Activation Phase. The proposal will take 7 days.
  </Step>
</Steps>

---

## Activation Phase

<Steps>
  <Step title="Record VIP scores on-chain">
    Each two-week stage opens with continuous writing of user scores that follow the approved policy.  
    Operators can update the contract at any time during a stage, enabling users to track their VIP scores in real time and catch errors early.
    Keep the original scoring scale intact—altering it would distort esINIT vesting ratios and invalidate existing user expectations.  
    Be prepared to close the stage promptly on the scheduled date; any delay pushes back user rewards.
  </Step>
  <Step title="Finalize scores">
    When the stage ends, you have a one-hour grace period to seal the data with `finalizeStage`.  
    After this transaction the scores become immutable, the L1 snapshot is submitted, and no further edits are possible.  
    <Warning>
    Double-check every entry before calling `finalizeStage`.  
    If an error slips through, alert the Initia team at once.
    </Warning>
  </Step>
  <Step title="Challenge period">
    A three-day review window follows finalization.  
    During this time the community may contest mistakes before rewards flow.
  </Step>
</Steps>

---

## Integration Tutorial (EVM Testnet Example)

This guide shows how to enable VIP for an **EVM rollup** on the Initia testnet.  
For Wasm or Move rollups, follow the same steps—just use the appropriate scoring-contract repository.

<Info title="Network Details">
You can find RPC endpoints and chain IDs in **[Network Information](/resources/developer/initia-l1.mdx)**.
</Info>

<Steps title="VIP Integration Steps">
  <Step title="Deploy Your EVM Rollup">
    Launch your rollup using the [Rollup CLI](https://github.com/initia-labs/minievm) or [Anvil](https://anvil.initia.xyz).
    Ensure you have a deployer account with permission to publish contracts.
  </Step>
  <Step title="Deploy the VIP Scoring Contract">
    Follow the steps below to deploy the VIP scoring contract.
    1. Clone **[`vip-score-evm`](https://github.com/initia-labs/vip-score-evm)**.  
    2. Compile and deploy `VIPScore.sol` using Hardhat, Foundry, Viem, or another EVM framework.  
    3. Save the deployed **contract address**; you will need it for the whitelist proposal.
  </Step>
  <Step title="Register the Rollup in the Initia Registry">
    Fork the Initia Registry repository.  
    ```bash
    git clone https://github.com/initia-labs/initia-registry.git
    ```

    Submit a pull request to merge these files into the mainnet or testnet directory, depending on your rollup's network.
      - `chain.json`: rollup metadata ([example](https://github.com/initia-labs/initia-registry/blob/main/mainnets/yominet/chain.json))
      - `profile.json`: VIP criteria and rollup information ([example](https://github.com/initia-labs/initia-registry/blob/main/profiles/yominet.json))  
  </Step>
  <Step title="Request VIP Whitelisting">
    Draft a forum post with the whitelist template, specifying your operator address and the scoring-contract address.  
    After community discussion, the request proceeds to an Initia L1 governance vote that runs for seven days; a successful “YES” activates VIP on your rollup.
  </Step>
  <Step title="Operate the VIP Scoring Contract">
    For each two-week VIP stage, use the following methods:

    | Action          | Method                             | Description                     |
    | --------------- | ---------------------------------- | ------------------------------- |
    | Start a stage   | `prepareStage(uint64 stage)`       | Opens a new stage               |
    | Update scores   | `updateScores(stage, addrs[], amounts[])` | Batch-write user scores         |
    | Finalize stage  | `finalizeStage(uint64 stage)`      | Locks scores (irreversible)     |

    ```ts
    import "dotenv/config";
    import { ethers } from "ethers";

    const VIPScoreABI = [
      "function prepareStage(uint64 stage)",
      "function updateScores(uint64 stage, address[] addrs, uint64[] amounts)",
      "function finalizeStage(uint64 stage)",
    ];

    /* -------------------------------------------------------- *
    *  Environment variables                                   *
    * -------------------------------------------------------- */
    const {
      JSON_RPC_URL     = "https://json-rpc.<your-rollup>.xyz",
      PRIVATE_KEY      = "0xabcd1234...",
      CONTRACT_ADDRESS = "0x12345...",
    } = process.env;

    if (!JSON_RPC_URL || !PRIVATE_KEY || !CONTRACT_ADDRESS) {
      throw new Error("JSON_RPC_URL, PRIVATE_KEY, or CONTRACT_ADDRESS is missing.");
    }

    /* -------------------------------------------------------- *
    *  Initialise ethers                                       *
    * -------------------------------------------------------- */
    const provider = new ethers.JsonRpcProvider(JSON_RPC_URL);
    const signer   = new ethers.Wallet(PRIVATE_KEY, provider);
    const vip      = new ethers.Contract(CONTRACT_ADDRESS, VIPScoreABI, signer);

    /* -------------------------------------------------------- *
    *  Stage operations                                        *
    * -------------------------------------------------------- */
    async function run() {
      const stage = 2;                                           // example epoch

      // 1. prepareStage
      console.log(`prepareStage(${stage})`);
      await (await vip.prepareStage(stage)).wait();

      // 2. updateScores (batch)
      const addrs   = [
        "0x1111111111111111111111111111111111111111",
        "0x2222222222222222222222222222222222222222",
      ];
      const amounts = [BigInt(100), BigInt(250)];
      console.log(`updateScores(${stage}, addrs[], amounts[])`);
      await (await vip.updateScores(stage, addrs, amounts)).wait();

      // 3. finalizeStage
      console.log(`finalizeStage(${stage})`);
      await (await vip.finalizeStage(stage)).wait();

      console.log("Stage finalized successfully.");
    }

    run().catch((err) => console.error(err));
    ```

    <Warning title="Finalization">
    `finalizeStage` is permanent. Verify all data before calling it.
    </Warning>
  </Step>
</Steps>

---

## Additional Information

### L1 VIP contract address

Mainnet: `init182yxkv4gqfvz7tjyde6dfgjdr4ldqxklgmf23aju2u3cslnss7ys6dy6w8`

Testnet: `init1u4wvsgl0ksgma40w6fdv55nhy2d9f332kdmfqp0cdnzyhsxquk4swhuwfz`

### How to query VIP stage start/end times
    Mainnet:
    ```bash
    curl https://rest.initia.xyz/initia/move/v1/accounts/0x3a886b32a802582f2e446e74d4a24d1d7ed01adf46d2a8f65c5723887e708789/resources/by_struct_tag?struct_tag=0x3a886b32a802582f2e446e74d4a24d1d7ed01adf46d2a8f65c5723887e708789%3A%3Avip%3A%3AModuleStore
    ```
    
    Testnet:
    ```bash
    curl https://rest.testnet.initia.xyz/initia/move/v1/accounts/0xe55cc823efb411bed5eed25aca5277229a54c62ab3769005f86cc44bc0c0e5ab/resources/by_struct_tag?struct_tag=0xe55cc823efb411bed5eed25aca5277229a54c62ab3769005f86cc44bc0c0e5ab%3A%3Avip%3A%3AModuleStore
    ```
        
### Updating Operator Commission

Operator commissions can be adjusted at any time. From the operator account send an `update_operator_commission` message to the VIP contract; pass the bridge ID, the version (use `1` unless your rollup has been delisted before), and the new commission rate. A typical command issued with the initiad CLI looks like this:

```bash
initiad tx move execute-json init182yxkv4gqfvz7tjyde6dfgjdr4ldqxklgmf23aju2u3cslnss7ys6dy6w8 vip update_operator_commission --args '["${BRIDGE_ID}", "${VERSION}", "${NEW_COMMISSION_RATE}"]' --from $OPEARTOR_WALLET_NAME --node https://rpc.initia.xyz --chain-id interwoven-1 --gas-prices 0.015uinit --gas auto
```

### Updating VIP Operator Address

If you need to replace the operator address itself, call `update_operator` with the bridge ID and the new operator address:

```bash
initiad tx move execute-json init182yxkv4gqfvz7tjyde6dfgjdr4ldqxklgmf23aju2u3cslnss7ys6dy6w8 vip update_operator --args '["${BRIDGE_ID}", "${NEW_OPERATOR_ADDRESS}"]' --from $OPERATOR_KEY --node https://rpc.initia.xyz --chain-id interwoven-1 --gas-prices 0.015uinit --gas auto
```
    
### Important Considerations

Changing the scoring scale impacts existing users’ esINIT vesting criteria—**do not change it**.

<Warning>
If you are looking to update the way you score users the flow should be as follows:

1. Post a new Forum post at least 7 days before the update takes place with the updated criteria
    - https://forum.initia.xyz/t/epoch-x-rollup-vip-update/263
2. Post a comment to your original VIP Whitelist Proposal forum post with a link to the new forum post
3. Notify the Initia team that you're updating your score so the VIP Committee may review
4. VIP Committee will review and approve / suggest updates if the update does not follow the VIP criteria
5. Publicly disclose the update to your users in advance of the change on channels such as Discord, X (Twitter), app, etc.

Please note: VIP Scoring is not meant to frequently change as it can alter vesting criteria for users.
</Warning>